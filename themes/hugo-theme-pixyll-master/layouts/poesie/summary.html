{{ $maxChars := 260 }}
{{ $ellipsis := "..." }}
{{ $truncatedSummary := .Summary }}
{{ if gt (len $truncatedSummary) $maxChars }}
  {{ $truncatedSummary = printf "%s%s" (substr $truncatedSummary 0 $maxChars) $ellipsis }}
{{ end }}
<div class="post">
  <a class="post-link" href="{{ .Permalink }}">
    <p class="post-meta left">{{ .Date.Format "Jan 2, 2006" }}</p>
    {{ if isset .Params "author" }}
    {{ end }}
    <div class="clearfix"></div>
    <h3 class="h2 post-title">{{ .Title }} {{ if .Draft }}(draft){{ end }}</h3>
    {{ with .Params.image }} <!-- Controlla se l'immagine di copertina Ã¨ presente -->
      <img src="{{ . }}" alt="Image" class="post-image">
    {{ end }}
    <p class="post-summary">{{ $truncatedSummary | safeHTML }}</p>
    <p class="post-author right">{{ i18n "written" }} {{ .Params.author }}</p>
  </a>
  {{ $baseurl := .Site.BaseURL }}
  {{ if isset .Params "tags" }} {{ if len .Params.tags }}
  <p class="post-meta"><i class="fa fa-tags" aria-hidden="true"></i>&nbsp;
    {{ range $i, $e := .Params.tags }}
        {{if $i}},&nbsp;{{end}}
        <a href="{{ $baseurl }}{{ $.Site.LanguagePrefix }}/tags/{{ . }}">{{ . }}</a>
    {{ end }}
  </p>
  {{ end }} {{ end }}
</div>
